{"ast":null,"code":"var _jsxFileName = \"D:\\\\GitHub\\\\goit-react-hw-04-phonebook\\\\src\\\\components\\\\Phonebook\\\\Phonebook.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { nanoid } from 'nanoid';\nimport ContactForm from './ContactForm';\nimport ContactList from './ContactList';\nimport Filter from './Filter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Phonebook() {\n  _s();\n\n  // state = {\n  //   contacts: [\n  //     { id: 'id-1', name: 'Rosie Simpson', number: '459-12-56' },\n  //     { id: 'id-2', name: 'Hermione Kline', number: '443-89-12' },\n  //     { id: 'id-3', name: 'Eden Clements', number: '645-17-79' },\n  //     { id: 'id-4', name: 'Annie Copeland', number: '227-91-26' },\n  //   ],\n  //   filter: '',\n  // };\n  const [contacts, setContacts] = useState([{\n    id: 'id-1',\n    name: 'Rosie Simpson',\n    number: '459-12-56'\n  }, {\n    id: 'id-2',\n    name: 'Hermione Kline',\n    number: '443-89-12'\n  }, {\n    id: 'id-3',\n    name: 'Eden Clements',\n    number: '645-17-79'\n  }, {\n    id: 'id-4',\n    name: 'Annie Copeland',\n    number: '227-91-26'\n  }]);\n  const [filter, setFilter] = useState(''); // get files from local storage\n\n  const firstRender = useRef(true);\n  console.log(firstRender);\n  useEffect(() => {\n    if (firstRender.current) {\n      firstRender.current = false;\n      const data = localStorage.getItem('contacts');\n      const contacts = JSON.parse(data); //todo JSON.parse - convert string to object\n\n      if (contacts !== null && contacts !== void 0 && contacts.length) {\n        setContacts(contacts);\n      }\n    }\n  }, []);\n  useEffect(() => {\n    if (!firstRender.current) {\n      localStorage.setItem('contacts', JSON.stringify(contacts)); //todo JSON.parse - convert string to object\n    }\n  }, [contacts]); // componentDidMount() {\n  //   const data = localStorage.getItem('contacts');\n  //   const contacts = JSON.parse(data);\n  //   if (data?.length) {\n  //     this.setState({ contacts }); // JSON.parse - convert string to object\n  //   }\n  // }\n  // componentDidUpdate(prevProps, prevState) {\n  //   const { contacts } = this.state;\n  //   if (prevState.contacts !== contacts) {\n  //     localStorage.setItem('contacts', JSON.stringify(contacts));\n  //   }\n  // }\n\n  const addContacts = useCallback(_ref => {\n    let {\n      name,\n      number\n    } = _ref;\n    const newContactName = name.toLowerCase();\n    const isDublicate = contacts.find(item => item.name.toLowerCase() === newContactName);\n\n    if (isDublicate) {\n      alert(`${name} is alredy in your phonebook`);\n      return;\n    }\n\n    setContacts(prevContacts => {\n      const newContact = {\n        id: nanoid(),\n        name,\n        number\n      };\n      return [...prevContacts, newContact];\n    });\n  }, [contacts, setContacts]);\n  const deleteContact = useCallback(id => {\n    const newContacts = contacts.filter(item = item.id !== id);\n    setContacts(newContacts);\n  }, [contacts, setContacts]);\n  const filterChange = useCallback(_ref2 => {\n    let {\n      target\n    } = _ref2;\n    const {\n      value\n    } = target;\n    setFilter(value);\n  }, [setFilter]);\n  const getContactsFiltered = useCallback(() => {\n    if (!filter) {\n      return contacts;\n    }\n\n    const filterRequest = filter.toLowerCase();\n    const filteredContacts = contacts.filter(_ref3 => {\n      let {\n        name\n      } = _ref3;\n      return name.toLowerCase().includes(filterRequest);\n    });\n    return filteredContacts;\n  }, [filter]);\n  const filteredResult = getContactsFiltered();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ContactForm, {\n      onSubmit: addContacts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      filter: filter,\n      onFilter: filterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContactList, {\n      contacts: filteredResult,\n      onDelete: deleteContact\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Phonebook, \"Ed9jvsuv1dE7elwTS/Jvu4DIT/E=\");\n\n_c = Phonebook;\nexport default Phonebook;\n\nvar _c;\n\n$RefreshReg$(_c, \"Phonebook\");","map":{"version":3,"names":["useState","useCallback","useEffect","useRef","nanoid","ContactForm","ContactList","Filter","Phonebook","contacts","setContacts","id","name","number","filter","setFilter","firstRender","console","log","current","data","localStorage","getItem","JSON","parse","length","setItem","stringify","addContacts","newContactName","toLowerCase","isDublicate","find","item","alert","prevContacts","newContact","deleteContact","newContacts","filterChange","target","value","getContactsFiltered","filterRequest","filteredContacts","includes","filteredResult"],"sources":["D:/GitHub/goit-react-hw-04-phonebook/src/components/Phonebook/Phonebook.jsx"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from 'react';\r\n\r\nimport { nanoid } from 'nanoid';\r\n\r\nimport ContactForm from './ContactForm';\r\nimport ContactList from './ContactList';\r\nimport Filter from './Filter';\r\n\r\nfunction Phonebook() {\r\n  // state = {\r\n  //   contacts: [\r\n  //     { id: 'id-1', name: 'Rosie Simpson', number: '459-12-56' },\r\n  //     { id: 'id-2', name: 'Hermione Kline', number: '443-89-12' },\r\n  //     { id: 'id-3', name: 'Eden Clements', number: '645-17-79' },\r\n  //     { id: 'id-4', name: 'Annie Copeland', number: '227-91-26' },\r\n  //   ],\r\n  //   filter: '',\r\n  // };\r\n\r\n  const [contacts, setContacts] = useState([\r\n    { id: 'id-1', name: 'Rosie Simpson', number: '459-12-56' },\r\n    { id: 'id-2', name: 'Hermione Kline', number: '443-89-12' },\r\n    { id: 'id-3', name: 'Eden Clements', number: '645-17-79' },\r\n    { id: 'id-4', name: 'Annie Copeland', number: '227-91-26' },\r\n  ]);\r\n\r\n  const [filter, setFilter] = useState('');\r\n  // get files from local storage\r\n\r\n  const firstRender = useRef(true);\r\n\r\n  console.log(firstRender);\r\n\r\n  useEffect(() => {\r\n    if (firstRender.current) {\r\n      firstRender.current = false;\r\n      const data = localStorage.getItem('contacts');\r\n      const contacts = JSON.parse(data); //todo JSON.parse - convert string to object\r\n      if (contacts?.length) {\r\n        setContacts(contacts);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!firstRender.current) {\r\n      localStorage.setItem('contacts', JSON.stringify(contacts)); //todo JSON.parse - convert string to object\r\n    }\r\n  }, [contacts]);\r\n\r\n  // componentDidMount() {\r\n  //   const data = localStorage.getItem('contacts');\r\n  //   const contacts = JSON.parse(data);\r\n  //   if (data?.length) {\r\n  //     this.setState({ contacts }); // JSON.parse - convert string to object\r\n  //   }\r\n  // }\r\n\r\n  // componentDidUpdate(prevProps, prevState) {\r\n  //   const { contacts } = this.state;\r\n  //   if (prevState.contacts !== contacts) {\r\n  //     localStorage.setItem('contacts', JSON.stringify(contacts));\r\n  //   }\r\n  // }\r\n\r\n  const addContacts = useCallback(\r\n    ({ name, number }) => {\r\n      const newContactName = name.toLowerCase();\r\n      const isDublicate = contacts.find(\r\n        item => item.name.toLowerCase() === newContactName\r\n      );\r\n      if (isDublicate) {\r\n        alert(`${name} is alredy in your phonebook`);\r\n        return;\r\n      }\r\n\r\n      setContacts(prevContacts => {\r\n        const newContact = {\r\n          id: nanoid(),\r\n          name,\r\n          number,\r\n        };\r\n        return [...prevContacts, newContact];\r\n      });\r\n    },\r\n    [contacts, setContacts]\r\n  );\r\n\r\n  const deleteContact = useCallback(\r\n    id => {\r\n      const newContacts = contacts.filter((item = item.id !== id));\r\n      setContacts(newContacts);\r\n    },\r\n    [contacts, setContacts]\r\n  );\r\n\r\n  const filterChange = useCallback(\r\n    ({ target }) => {\r\n      const { value } = target;\r\n      setFilter(value);\r\n    },\r\n    [setFilter]\r\n  );\r\n\r\n  const getContactsFiltered = useCallback(() => {\r\n    if (!filter) {\r\n      return contacts;\r\n    }\r\n    const filterRequest = filter.toLowerCase();\r\n    const filteredContacts = contacts.filter(({ name }) => {\r\n      return name.toLowerCase().includes(filterRequest);\r\n    });\r\n    return filteredContacts;\r\n  }, [filter]);\r\n\r\n  const filteredResult = getContactsFiltered();\r\n  return (\r\n    <div>\r\n      <ContactForm onSubmit={addContacts} />\r\n      <Filter filter={filter} onFilter={filterChange} />\r\n      <ContactList contacts={filteredResult} onDelete={deleteContact} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Phonebook;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}